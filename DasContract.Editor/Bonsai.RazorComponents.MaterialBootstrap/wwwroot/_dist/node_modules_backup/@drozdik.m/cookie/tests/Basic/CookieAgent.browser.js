exports.__esModule = true;
var web_unit_test_1 = require("@drozdik.m/web-unit-test");
var unit_test_1 = require("@drozdik.m/unit-test");
var Cookie_1 = require("../../src/Cookie");
var unitTest = new unit_test_1.UnitTest("Cookie");
unitTest.AddTestCase("New empty cookie", function () {
    var cookie1 = new Cookie_1.Cookie("cookie1");
    cookie1.Delete();
    unit_test_1.Assert.IsNull(cookie1.Get());
    unit_test_1.Assert.IsNull(cookie1.GetCached());
});
unitTest.AddTestCase("Get and set", function () {
    var cookie1 = new Cookie_1.Cookie("cookie1");
    cookie1.Delete();
    unit_test_1.Assert.IsNull(cookie1.Get());
    unit_test_1.Assert.IsNull(cookie1.GetCached());
    cookie1.Set("ahoyy");
    unit_test_1.Assert.AreEqual("ahoyy", cookie1.Get());
    unit_test_1.Assert.AreEqual("ahoyy", cookie1.GetCached());
});
unitTest.AddTestCase("Get and set - more cookies", function () {
    var cookie1 = new Cookie_1.Cookie("cookie1");
    cookie1.Set("ahoy");
    unit_test_1.Assert.AreEqual("ahoy", cookie1.Get());
    unit_test_1.Assert.AreEqual("ahoy", cookie1.GetCached());
    var cookie2 = new Cookie_1.Cookie("cookie2");
    cookie2.Set("ahoyy");
    unit_test_1.Assert.AreEqual("ahoyy", cookie2.Get());
    unit_test_1.Assert.AreEqual("ahoyy", cookie2.GetCached());
    var cookie3 = new Cookie_1.Cookie("cookie3");
    cookie3.Set("ahoyyy");
    unit_test_1.Assert.AreEqual("ahoyyy", cookie3.Get());
    unit_test_1.Assert.AreEqual("ahoyyy", cookie3.GetCached());
    for (var i = 0; i < 5; i++) {
        unit_test_1.Assert.AreEqual("ahoy", cookie1.Get());
        unit_test_1.Assert.AreEqual("ahoy", cookie1.GetCached());
        unit_test_1.Assert.AreEqual("ahoyy", cookie2.Get());
        unit_test_1.Assert.AreEqual("ahoyy", cookie2.GetCached());
        unit_test_1.Assert.AreEqual("ahoyyy", cookie3.Get());
        unit_test_1.Assert.AreEqual("ahoyyy", cookie3.GetCached());
    }
});
unitTest.AddTestCase("Semicolon", function () {
    var cookie4 = new Cookie_1.Cookie("cookie4");
    cookie4.Delete();
    cookie4.Set("semi;semi");
    unit_test_1.Assert.AreEqual("semi;semi", cookie4.Get());
    unit_test_1.Assert.AreEqual("semi;semi", cookie4.GetCached());
});
unitTest.AddTestCase("Cache", function () {
    var cookie5 = new Cookie_1.Cookie("cookie5");
    cookie5.Set("text1");
    unit_test_1.Assert.AreEqual("text1", cookie5.Get());
    unit_test_1.Assert.AreEqual("text1", cookie5.GetCached());
    var cookie55 = new Cookie_1.Cookie("cookie5");
    cookie55.Set("text2");
    unit_test_1.Assert.AreEqual("text1", cookie5.GetCached());
    unit_test_1.Assert.AreEqual("text2", cookie5.Get());
    cookie55.Set("text3");
    unit_test_1.Assert.AreEqual("text2", cookie5.GetCached());
    cookie5.RefreshCache();
    unit_test_1.Assert.AreEqual("text3", cookie5.GetCached());
});
unitTest.AddTestCase("Delete", function () {
    var cookie6 = new Cookie_1.Cookie("cookie6");
    cookie6.Set("ops1");
    unit_test_1.Assert.AreEqual("ops1", cookie6.Get());
    unit_test_1.Assert.AreEqual("ops1", cookie6.GetCached());
    cookie6.Delete();
    unit_test_1.Assert.IsNull(cookie6.Get());
    unit_test_1.Assert.IsNull(cookie6.GetCached());
});
unitTest.AddTestCase("Exists", function () {
    var cookie7 = new Cookie_1.Cookie("cookie7");
    cookie7.Set("ops2");
    unit_test_1.Assert.AreEqual("ops2", cookie7.Get());
    unit_test_1.Assert.AreEqual("ops2", cookie7.GetCached());
    unit_test_1.Assert.IsTrue(cookie7.Exists());
    unit_test_1.Assert.IsTrue(cookie7.ExistsCached());
    cookie7.Delete();
    unit_test_1.Assert.IsFalse(cookie7.Exists());
    unit_test_1.Assert.IsFalse(cookie7.ExistsCached());
    cookie7.Delete();
});
unitTest.AddTestCase("Exists cached", function () {
    var cookie8 = new Cookie_1.Cookie("cookie8");
    var cookie88 = new Cookie_1.Cookie("cookie8");
    cookie8.Delete();
    cookie88.Delete();
    cookie8.Set("ops2");
    unit_test_1.Assert.AreEqual("ops2", cookie8.Get());
    unit_test_1.Assert.AreEqual("ops2", cookie8.GetCached());
    unit_test_1.Assert.IsTrue(cookie8.Exists());
    unit_test_1.Assert.IsTrue(cookie8.ExistsCached());
    unit_test_1.Assert.IsFalse(cookie88.ExistsCached());
    cookie88.Set("ops22");
    cookie8.Delete();
    unit_test_1.Assert.IsFalse(cookie8.Exists());
    unit_test_1.Assert.IsFalse(cookie8.ExistsCached());
    unit_test_1.Assert.IsTrue(cookie88.ExistsCached());
    cookie8.Delete();
});
unitTest.AddTestCase("Combined test", function () {
    //Testing cookies
    var testingCookie1 = new Cookie_1.Cookie("testingCookie1");
    var testingCookie2 = new Cookie_1.Cookie("testingCookie2");
    var testingCookie3 = new Cookie_1.Cookie("testingCookie3");
    testingCookie1.Delete();
    testingCookie2.Delete();
    testingCookie3.Delete();
    //Basic Get/Set
    unit_test_1.Assert.Assert(testingCookie1.Get() == null);
    unit_test_1.Assert.Assert(testingCookie1.GetCached() == null);
    testingCookie1.Set("testingCookieValue1");
    unit_test_1.Assert.Assert(testingCookie1.Get() == "testingCookieValue1");
    unit_test_1.Assert.Assert(testingCookie1.GetCached() == "testingCookieValue1");
    unit_test_1.Assert.Assert(testingCookie2.Get() == null);
    unit_test_1.Assert.Assert(testingCookie2.GetCached() == null);
    testingCookie2.Set("testingCookieValue2");
    unit_test_1.Assert.Assert(testingCookie2.Get() == "testingCookieValue2");
    unit_test_1.Assert.Assert(testingCookie2.GetCached() == "testingCookieValue2");
    unit_test_1.Assert.Assert(testingCookie1.Get() == "testingCookieValue1");
    unit_test_1.Assert.Assert(testingCookie1.GetCached() == "testingCookieValue1");
    testingCookie3.Set("testingCookieValue3");
    unit_test_1.Assert.Assert(testingCookie3.Get() == "testingCookieValue3");
    unit_test_1.Assert.Assert(testingCookie3.GetCached() == "testingCookieValue3");
    unit_test_1.Assert.Assert(testingCookie2.Get() == "testingCookieValue2");
    unit_test_1.Assert.Assert(testingCookie2.GetCached() == "testingCookieValue2");
    unit_test_1.Assert.Assert(testingCookie1.Get() == "testingCookieValue1");
    unit_test_1.Assert.Assert(testingCookie1.GetCached() == "testingCookieValue1");
    testingCookie1.Set("testingCookieValue11");
    testingCookie2.Set("testingCookieValue22");
    testingCookie3.Set("testingCookieValue33");
    unit_test_1.Assert.Assert(testingCookie3.GetCached() == "testingCookieValue33");
    unit_test_1.Assert.Assert(testingCookie3.Get() == "testingCookieValue33");
    unit_test_1.Assert.Assert(testingCookie2.GetCached() == "testingCookieValue22");
    unit_test_1.Assert.Assert(testingCookie2.Get() == "testingCookieValue22");
    unit_test_1.Assert.Assert(testingCookie1.GetCached() == "testingCookieValue11");
    unit_test_1.Assert.Assert(testingCookie1.Get() == "testingCookieValue11");
    //Delete 
    unit_test_1.Assert.Assert(testingCookie1.Exists());
    testingCookie1.Delete();
    unit_test_1.Assert.Assert(!testingCookie1.Exists());
    unit_test_1.Assert.Assert(testingCookie1.Get() == null);
    unit_test_1.Assert.Assert(testingCookie1.GetCached() == null);
    unit_test_1.Assert.Assert(testingCookie3.GetCached() == "testingCookieValue33");
    unit_test_1.Assert.Assert(testingCookie3.Get() == "testingCookieValue33");
    unit_test_1.Assert.Assert(testingCookie2.GetCached() == "testingCookieValue22");
    unit_test_1.Assert.Assert(testingCookie2.Get() == "testingCookieValue22");
    unit_test_1.Assert.Assert(testingCookie2.Exists());
    unit_test_1.Assert.Assert(testingCookie2.ExistsCached());
    testingCookie2.Delete();
    testingCookie3.Delete();
    unit_test_1.Assert.Assert(!testingCookie2.Exists());
    unit_test_1.Assert.Assert(!testingCookie2.ExistsCached());
    unit_test_1.Assert.Assert(testingCookie2.Get() == null);
    unit_test_1.Assert.Assert(testingCookie2.GetCached() == null);
    unit_test_1.Assert.Assert(testingCookie3.Get() == null);
    unit_test_1.Assert.Assert(testingCookie3.GetCached() == null);
    //Cache
    var testingCookie11 = new Cookie_1.Cookie("testingCookie1");
    testingCookie11.Set("test1");
    testingCookie1.Set("test1");
    unit_test_1.Assert.Assert(testingCookie11.ExistsCached());
    unit_test_1.Assert.Assert(testingCookie1.ExistsCached());
    testingCookie11.Set("test2");
    unit_test_1.Assert.Assert(testingCookie1.GetCached() == "test1");
    unit_test_1.Assert.Assert(testingCookie1.Get() == "test2");
    testingCookie1.Delete();
    unit_test_1.Assert.Assert(testingCookie11.GetCached() == "test2");
    unit_test_1.Assert.Assert(testingCookie11.Get() == null);
    unit_test_1.Assert.Assert(testingCookie11.GetCached() == null);
});
var browserTestAgent = new web_unit_test_1.BrowserTestAgent(unitTest);
browserTestAgent.Run();
