exports.__esModule = true;
var web_unit_test_1 = require("@drozdik.m/web-unit-test");
var unit_test_1 = require("@drozdik.m/unit-test");
var ElementResizeWatcher_1 = require("../../src/ElementResizeWatcher");
var unitTest = new unit_test_1.UnitTest("Element Resize Watcher");
document.getElementsByTagName("body").item(0).innerHTML = "\n<div id=\"wrapper\">\n    <div id=\"element\">&nbsp;</div>\n</div>\n<style>\n\n#wrapper {\n    height: 100px;\n    width: 100px;\n}\n\n#element{\n    height: 50px;\n    width: 50px;\n    max-width: 100%;\n}\n\n</style>\n";
unitTest.AddSyncTestCase("No resize", function () {
    var i = 0;
    var element = document.getElementById("element");
    var wrapper = document.getElementById("wrapper");
    var watcher = new ElementResizeWatcher_1.ElementResizeWatcher(element);
    watcher.OnResize.Add(function () {
        i++;
    });
    wrapper.style.width = "60px";
    unit_test_1.Assert.AreEqual(0, i);
});
unitTest.AddSyncTestCase("The element resize", function () {
    var i = 0;
    var element = document.getElementById("element");
    var wrapper = document.getElementById("wrapper");
    var watcher = new ElementResizeWatcher_1.ElementResizeWatcher(element);
    watcher.OnResize.Add(function () {
        i++;
    });
    element.style.width = "10px";
    window.dispatchEvent(new Event("resize"));
    element.style.width = "50px";
    window.dispatchEvent(new Event("resize"));
    unit_test_1.Assert.AreEqual(2, i);
});
unitTest.AddSyncTestCase("Wrapper resize", function () {
    var i = 0;
    var element = document.getElementById("element");
    var wrapper = document.getElementById("wrapper");
    var watcher = new ElementResizeWatcher_1.ElementResizeWatcher(element);
    watcher.OnResize.Add(function () {
        i++;
    });
    wrapper.style.width = "10px";
    window.dispatchEvent(new Event("resize"));
    wrapper.style.width = "100px";
    unit_test_1.Assert.AreEqual(1, i);
});
var browserTestAgent = new web_unit_test_1.BrowserTestAgent(unitTest);
browserTestAgent.Run();
