exports.__esModule = true;
var web_unit_test_1 = require("@drozdik.m/web-unit-test");
var unit_test_1 = require("@drozdik.m/unit-test");
var cookies_controller_1 = require("@drozdik.m/cookies-controller");
var CookiesBar_1 = require("../../src/CookiesBar");
var unitTest = new unit_test_1.UnitTest("Cookies Bar");
document.body.insertAdjacentHTML("beforeend", "\n        <div id=\"cookiesBar\" class=\"cookiesBar\">\n            <div class=\"cookiesBarInner\">\n                <p class=\"cookiesBarText\">Prohl\u00ED\u017Een\u00EDm t\u00E9to str\u00E1nky souhlas\u00EDte s u\u017E\u00EDv\u00E1n\u00EDm <a href=\"#\" target=\"_blank\" title=\"Informace o cookies\">cookies</a></p>\n                <button type=\"button\" class=\"cookiesBarButton\">V po\u0159\u00E1dku</button>\n            </div>\n        </div>\n");
unitTest.AddAsyncTestCase("Confirm bar", function (Done, Fail) {
    document.addEventListener("DOMContentLoaded", function () {
        var controller = new cookies_controller_1.CookiesController();
        controller.Forbid();
        var bar = new CookiesBar_1.CookiesBar(document.getElementById("cookiesBar"), controller);
        var clickEvent = document.createEvent("Event");
        clickEvent.initEvent("click", true, true);
        document.querySelector("#cookiesBar .cookiesBarButton").dispatchEvent(clickEvent);
        try {
            unit_test_1.Assert.IsTrue(controller.AllowedToUse());
        }
        catch (_a) {
            Fail();
        }
        var interval = setInterval(function () {
            if (!document.getElementById("cookiesBar")) {
                clearInterval(interval);
                Done();
            }
        }, 50);
    });
});
var browserTestAgent = new web_unit_test_1.BrowserTestAgent(unitTest);
browserTestAgent.Run();
