exports.__esModule = true;
var CookiesBar = /** @class */ (function () {
    //--------------------------------------------------
    //---------CONSTRUCTOR------------------------------
    //--------------------------------------------------
    /**
     * Creates new instance of the cookies bar
     * @param bar Target bar element
     * @param cookiesController Used cookies controller
     */
    function CookiesBar(barElement, cookiesController) {
        //--------------------------------------------------
        //---------VARIABLES--------------------------------
        //--------------------------------------------------
        this.confirmed = false;
        this.cookiesController = null;
        this.barElement = null;
        this.cookiesBarButton = null;
        this.cookiesController = cookiesController;
        this.barElement = barElement;
        //COOKIES ALLOWED - NOT NEEDED
        if (cookiesController.AllowedToUse()) {
            this.Hide();
            return;
        }
        //BAR EXISTANCE
        if (!this.barElement) {
            console.error("CookiesBar(...) - bar not found");
            return;
        }
        //Show the bar
        this.Show();
        //BUTTON CLICK
        this.cookiesBarButton = this.barElement.getElementsByClassName("cookiesBarButton").item(0);
        if (!this.cookiesBarButton) {
            console.error("CookiesBar(...) - child element .cookiesBarButton not found");
            return;
        }
        var object = this;
        this.cookiesBarButton.addEventListener("click", function () {
            object.ConfirmButtonClick();
        });
    }
    //--------------------------------------------------
    //---------METHODS----------------------------------
    //--------------------------------------------------
    /**
    * Hide the bar (no animation)
    */
    CookiesBar.prototype.Hide = function () {
        if (this.barElement)
            this.barElement.parentNode.removeChild(this.barElement);
    };
    /**
    * Show the bar (animation)
    */
    CookiesBar.prototype.Show = function () {
        this.barElement.style.opacity = "1";
    };
    /**
    * Confirmed terms and conditions (hide animation)
    */
    CookiesBar.prototype.ConfirmButtonClick = function () {
        //Protect double clicks
        if (this.confirmed)
            return;
        this.confirmed = true;
        //Animation
        var object = this;
        var cookiesBarHeight = this.barElement.offsetHeight;
        this.barElement.style.bottom = -cookiesBarHeight + "px";
        setTimeout(function () {
            object.Hide();
        }, 250);
        //Permit
        this.cookiesController.Permit();
    };
    return CookiesBar;
}());
exports.CookiesBar = CookiesBar;
