@page "/users"

<div class="users-roles-editor">
    <div class="users">
        <h2>Users</h2>

        @foreach (var user in ContractManager.GetProcessUsers())
        {
            <div class="accordion" id="user-@(user.Id)-accordion">
                <div class="accordion-item">
                    
                    <h2 class="accordion-header">
                        
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-@(user.Id)">
                            <strong>@(user.Name == null ? "Unnamed user" : user.Name)</strong>
                        </button>
                    </h2>

                    <div id="collapse-@(user.Id)" class="accordion-collapse collapse show" data-bs-parent="#user-@(user.Id)-accordion">
                        <div class="accordion-body">
                            <div class="input short">
                                <label for="@($"user-name-{user.Id}")" class="form-label">Name</label>
                                <input class="form-control" id="@($"user-name-{user.Id}")" @bind-value="user.Name">
                            </div>

                            <div class="input short">
                                <label for="@($"user-address-{user.Id}")" class="form-label">Address</label>
                                <input class="form-control" id="@($"user-address-{user.Id}")" @bind-value="user.Address">
                            </div>

                            <div class="input long">
                                <label for="@($"user-description-{user.Id}")" class="form-label">Description</label>
                                <input class="form-control" id="@($"user-description-{user.Id}")" @bind-value="user.Description">
                            </div>
                            <button @onclick="() => UsersRolesManager.RemoveUser(user)" class="btn btn-danger">Remove User</button>
                        </div>
                    </div>
                </div>
            </div>
        }

        <button @onclick="() => UsersRolesManager.AddUser()" class="btn btn-primary">Add User</button>
    </div>
    <div class="roles">
        <h2>Roles</h2>
    </div>
</div>

